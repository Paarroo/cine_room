<section class="participations-section py-8">
  <div class="container-app">
    <div class="glass-effect rounded-3xl p-6">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-2xl font-bold text-white">
          <i class="fas fa-users text-primary mr-3"></i>
          Liste des participants
        </h3>
        <span class="text-sm text-gray-400">
          <%= @participations.count %> participation<%= 's' if @participations.count > 1 %>
        </span>
      </div>

      <!-- Filters -->
      <div class="mb-6 flex flex-wrap gap-4">
        <select class="form-input w-auto" onchange="filterParticipations(this.value)">
          <option value="">Tous les statuts</option>
          <option value="confirmed">Confirmés</option>
          <option value="pending">En attente</option>
          <option value="cancelled">Annulés</option>
        </select>
      </div>

      <!-- Participations List -->
      <div class="space-y-4">
        <% @participations.each do |participation| %>
          <div class="glass-subtle rounded-xl p-6 participation-item"
               data-status="<%= participation.status %>">
            <div class="flex items-center justify-between">
              <!-- User Info -->
              <div class="flex items-center space-x-4">
                <div class="w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold">
                  <%= participation.user&.full_name&.first(2)&.upcase || 'U' %>
                </div>
                <div>
                  <h4 class="text-lg font-semibold text-white">
                    <%= participation.user&.full_name || 'Utilisateur inconnu' %>
                  </h4>
                  <p class="text-sm text-gray-400">
                    <%= participation.user&.email %>
                  </p>
                  <p class="text-xs text-gray-500">
                    Réservé le <%= participation.created_at.strftime("%d/%m/%Y à %H:%M") %>
                  </p>
                </div>
              </div>

              <!-- Participation Details -->
              <div class="text-center">
                <div class="text-lg font-semibold text-white mb-1">
                  <%= participation.seats %> place<%= 's' if participation.seats > 1 %>
                </div>
                <div class="text-sm text-gray-400">
                  <%= number_to_currency((@event.price_cents * participation.seats) / 100.0) %>
                </div>
              </div>

              <!-- Status & Actions -->
              <div class="text-right">
                <% case participation.status %>
                <% when 'confirmed' %>
                  <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-lg text-sm font-medium mb-2 block">
                    <i class="fas fa-check mr-1"></i>Confirmé
                  </span>
                <% when 'pending' %>
                  <span class="px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-lg text-sm font-medium mb-2 block">
                    <i class="fas fa-clock mr-1"></i>En attente
                  </span>
                <% when 'cancelled' %>
                  <span class="px-3 py-1 bg-red-500/20 text-red-400 rounded-lg text-sm font-medium mb-2 block">
                    <i class="fas fa-times mr-1"></i>Annulé
                  </span>
                <% end %>

                <!-- Payment Status -->
                <div class="text-xs text-gray-500">
                  <% if participation.stripe_payment_id.present? %>
                    <i class="fas fa-credit-card text-green-400 mr-1"></i>Payé
                  <% else %>
                    <i class="fas fa-credit-card text-gray-600 mr-1"></i>Non payé
                  <% end %>
                </div>

                <!-- Actions -->
                <div class="mt-2">
                  <%= link_to admin_participation_path(participation),
                      class: "text-primary hover:text-primary/80 text-sm transition-colors" do %>
                    <i class="fas fa-eye mr-1"></i>Voir
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <!-- View All Link -->
      <div class="text-center mt-6">
        <%= link_to admin_participations_path(event_id: @event.id),
            class: "inline-flex items-center px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg transition-colors" do %>
          <i class="fas fa-list mr-2"></i>
          Voir toutes les participations
        <% end %>
      </div>
    </div>
  </div>
</section>
