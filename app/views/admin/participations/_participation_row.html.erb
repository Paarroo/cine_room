<tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
  <!-- Checkbox -->
  <td class="py-3 px-1 w-8">
    <input
      type="checkbox"
      class="w-4 h-4 text-primary bg-transparent border-gray-300 rounded focus:ring-primary participation-checkbox"
      data-participation-id="<%= data[:id] %>"
      data-admin-participations-target="participationCheckbox"
      data-action="change->admin-participations#updateBulkActions"
    >
  </td>

  <!-- User -->
  <td class="py-3 px-1 min-w-0 max-w-32">
    <div class="flex items-center space-x-1">
      <div class="w-6 h-6 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-white font-bold text-xs flex-shrink-0">
        <%= data[:user_name].present? ? data[:user_name].first(1).upcase : 'U' %>
      </div>
      <div class="min-w-0 flex-1">
        <div class="text-white font-medium text-xs truncate">
          <%= truncate(data[:user_name], length: 12) %>
        </div>
      </div>
    </div>
  </td>

  <!-- Event -->
  <td class="py-3 px-1 min-w-0 max-w-48">
    <div class="text-white font-medium text-xs truncate">
      <%= link_to truncate(data[:event_title], length: 30), admin_participation_path(data[:id]),
          class: "hover:text-primary transition-colors" %>
    </div>
    <% if data[:event_link]&.venue_name %>
      <div class="text-gray-400 text-xs truncate">
        <%= truncate(data[:event_link].venue_name, length: 25) %>
      </div>
    <% end %>
  </td>

  <!-- Movie -->
  <td class="py-3 px-1 min-w-0 max-w-40">
    <% if data[:movie_title].present? %>
      <div class="flex items-center space-x-1">
        <div class="w-4 h-6 bg-gradient-to-br from-red-500 to-pink-600 rounded flex items-center justify-center text-white font-bold text-xs flex-shrink-0">
          <%= data[:movie_title].first(1) %>
        </div>
        <div class="text-white text-xs truncate">
          <%= truncate(data[:movie_title], length: 20) %>
        </div>
      </div>
    <% else %>
      <span class="text-gray-500 text-xs">-</span>
    <% end %>
  </td>

  <!-- Date -->
  <td class="py-3 px-1 w-16">
    <% if data[:event_date] && data[:event_date] != 'N/A' %>
      <div class="text-white text-xs">
        <%= data[:event_date].strftime("%d/%m") %>
      </div>
      <div class="text-gray-400 text-xs">
        <%= data[:event_link]&.start_time&.strftime("%H:%M") %>
      </div>
    <% else %>
      <span class="text-gray-500 text-xs">-</span>
    <% end %>
  </td>

  <!-- Places -->
  <td class="py-3 px-1 w-12 text-center">
    <span class="text-white font-medium text-xs"><%= data[:seats] %></span>
  </td>

  <!-- Prix -->
  <td class="py-3 px-1 w-16">
    <div class="text-primary font-semibold text-xs">
      <%= number_to_currency(data[:total_price], precision: 0) %>
    </div>
  </td>

  <!-- Statut -->
  <td class="py-3 px-1 w-20">
    <% case data[:status] %>
    <% when 'pending' %>
      <span class="px-1 py-0.5 bg-yellow-500/20 text-yellow-300 rounded text-xs">
        <i class="fas fa-clock"></i>
      </span>
    <% when 'confirmed' %>
      <span class="px-1 py-0.5 bg-green-500/20 text-green-300 rounded text-xs">
        <i class="fas fa-check"></i>
      </span>
    <% when 'cancelled' %>
      <span class="px-1 py-0.5 bg-red-500/20 text-red-300 rounded text-xs">
        <i class="fas fa-times"></i>
      </span>
    <% end %>
  </td>

  <!-- Paiement -->
  <td class="py-3 px-1 w-8 text-center">
    <% if data[:has_payment] %>
      <i class="fas fa-credit-card text-green-400 text-xs"></i>
    <% else %>
      <i class="fas fa-credit-card text-gray-500 text-xs"></i>
    <% end %>
  </td>

  <!-- Actions -->
  <td class="py-3 px-1 w-20">
    <div class="flex items-center space-x-0.5">
      <!-- View -->
      <%= link_to admin_participation_path(data[:id]),
          class: "p-1 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded text-xs transition-colors",
          title: "Voir" do %>
        <i class="fas fa-eye"></i>
      <% end %>

      <!-- Action selon statut -->
      <% case data[:status] %>
      <% when 'pending' %>
        <button
          type="button"
          class="p-1 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded text-xs transition-colors"
          data-action="click->admin-participations#updateSingleStatus"
          data-participation-id="<%= data[:id] %>"
          data-new-status="confirmed"
          data-confirm-message="Confirmer ?"
          title="Confirmer"
        >
          <i class="fas fa-check"></i>
        </button>
      <% when 'confirmed' %>
        <button
          type="button"
          class="p-1 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded text-xs transition-colors"
          data-action="click->admin-participations#updateSingleStatus"
          data-participation-id="<%= data[:id] %>"
          data-new-status="cancelled"
          data-confirm-message="Annuler ?"
          title="Annuler"
        >
          <i class="fas fa-times"></i>
        </button>
      <% when 'cancelled' %>
        <button
          type="button"
          class="p-1 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded text-xs transition-colors"
          data-action="click->admin-participations#updateSingleStatus"
          data-participation-id="<%= data[:id] %>"
          data-new-status="pending"
          data-confirm-message="Restaurer ?"
          title="Restaurer"
        >
          <i class="fas fa-undo"></i>
        </button>
      <% end %>
    </div>
  </td>
</tr>
