<div class="max-w-3xl mx-auto my-44 px-4">
  <!-- Movie presentation -->
  <div class="flex flex-col md:flex-row items-start gap-6 mb-8 bg-white/5 rounded-2xl p-6 border border-white/10">
    <% movie = @review.movie || @review.event&.movie %>

    <% if movie.present? %>
      <!-- Movie poster -->
      <div class="w-32 h-48 rounded-xl overflow-hidden flex-shrink-0">
        <% if movie.poster.attached? %>
          <%= image_tag movie.poster.variant(resize_to_fill: [192, 288]).processed,
              alt: "#{movie.title} poster",
              class: "w-full h-full object-cover" %>
        <% else %>
          <%= image_tag "default-poster.jpg",
              alt: "Default poster",
              class: "w-full h-full object-cover" %>
        <% end %>
      </div>

      <!-- Movie details -->
      <div class="flex-1 text-gray-300">
        <h1 class="text-2xl font-bold text-white mb-2"><%= movie.title %></h1>
        <p class="text-sm mb-2 text-gray-400">
          Réalisé par <%= movie.director.presence || "#{movie.user.first_name} #{movie.user.last_name}" %>
        </p>
        <% if movie.synopsis.present? %>
          <p class="text-sm leading-relaxed"><%= truncate(movie.synopsis, length: 300) %></p>
        <% end %>
      </div>
    <% end %>
  </div>

  <!-- Review form -->
  <%= render 'form', review: @review %>
</div>
