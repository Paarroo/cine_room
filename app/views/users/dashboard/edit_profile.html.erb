<div class="relative min-h-screen py-20 bg-gradient-to-br from-dark-400 via-dark-300 to-dark-400">
  <div class="max-w-3xl mx-auto px-6">
    
    <!-- Back to dashboard button -->
    <div class="mb-6">
      <%= link_to users_dashboard_path(current_user), class: "inline-flex items-center text-sm text-gold-400 hover:text-gold-300 font-medium transition group" do %>
        <svg class="w-4 h-4 mr-2 text-gold-400 group-hover:text-gold-300 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
        </svg>
        Retour au tableau de bord
      <% end %>
    </div>

    <!-- Header -->
    <div class="text-center mb-12">
      <div class="inline-flex items-center space-x-2 glass-effect rounded-full px-6 py-3 mb-4">
        <div class="w-2 h-2 bg-gold-500 rounded-full animate-pulse"></div>
        <span class="text-gold-400 font-medium">Mise à jour du profil</span>
      </div>
      <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold gradient-text mb-2">Modifier mes informations</h2>
      <p class="text-sm sm:text-base lg:text-lg text-gray-400">Prénom, nom & biographie publique</p>
    </div>

    <!-- Form card -->
    <div class="glass-effect rounded-2xl p-8 shadow-xl">
      <%= form_with model: @user, url: update_profile_users_dashboard_path, method: :patch, html: { multipart: true } do |f| %>
        <div class="mb-6">
          <%= f.label :first_name, "Prénom", class: "block text-sm font-semibold text-gray-300 mb-1" %>
          <%= f.text_field :first_name, placeholder: "Votre prénom",
                disabled: @user.movies.exists?,
                class: "w-full px-4 py-3 bg-dark-500/70 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gold-500 transition" %>
        </div>

        <div class="mb-6">
          <%= f.label :last_name, "Nom", class: "block text-sm font-semibold text-gray-300 mb-1" %>
          <%= f.text_field :last_name, placeholder: "Votre nom de famille",
                disabled: @user.movies.exists?,
                class: "w-full px-4 py-3 bg-dark-500/70 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gold-500 transition" %>
        </div>

        <div class="mb-8">
          <%= f.label :bio, "Bio", class: "block text-sm font-semibold text-gray-300 mb-1" %>
          <%= f.text_area :bio, rows: 5, placeholder: "Parlez un peu de vous...",
                class: "w-full px-4 py-3 bg-dark-500/70 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition resize-none" %>
        </div>

        <div data-controller="image-preview" class="mb-8">
          <%= f.label :avatar, "Photo de profil", class: "block text-sm font-semibold text-gray-300 mb-2" %>

          <!-- Stylised button -->
          <label for="user_avatar" class="block w-full cursor-pointer px-4 py-3 bg-dark-500/70 border border-white/10 rounded-xl text-white text-sm hover:bg-dark-500/90 transition text-center">
            Choisir une image
          </label>

          <!-- Hidden file field -->
          <%= f.file_field :avatar,
                class: "hidden",
                accept: "image/*",
                data: {
                  "image-preview-target": "input",
                  action: "image-preview#previewFile"
                } %>

          <!-- File name -->
          <p data-image-preview-target="filename" class="text-sm text-gray-400 mt-2">Aucun fichier sélectionné</p>

          <!-- Avatar preview -->
          <div data-image-preview-target="preview" class="mt-4 hidden">
            <div class="">
              <img data-image-preview-target="image"
                  src="https://via.placeholder.com/150"
                  alt="Aperçu de l'image"
                  class="avatar-circle" />
            </div>
          </div>



        <div class="text-right">
          <%= f.submit "Enregistrer", class: "inline-flex items-center bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-white bg-gold-600 px-6 py-3 rounded-full font-semibold transition-all duration-300 hover:scale-105 shadow-lg" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

